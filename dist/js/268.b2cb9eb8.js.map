{"version":3,"file":"js/268.b2cb9eb8.js","mappings":"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","sources":["webpack://prueba-tecnica-front/./node_modules/vue-loader/dist/exportHelper.js","webpack://prueba-tecnica-front/./src/components/inputs/InputText.vue","webpack://prueba-tecnica-front/./src/components/inputs/InputText.vue?c62e","webpack://prueba-tecnica-front/./src/services/report.js","webpack://prueba-tecnica-front/./src/components/ReportFormModal.vue","webpack://prueba-tecnica-front/./src/components/ReportFormModal.vue?49cd","webpack://prueba-tecnica-front/./src/views/TableReport.vue","webpack://prueba-tecnica-front/./src/views/TableReport.vue?e1fc"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","<script setup>\r\nimport { ref } from 'vue'\r\nconst minDate = ref('1980-01-01')\r\nconst maxDate = ref('2010-12-31')\r\n// eslint-disable-next-line no-undef\r\ndefineProps({\r\n    id: {\r\n        type: String,\r\n        required: true,\r\n    },\r\n    label: {\r\n        type: String,\r\n        required: false,\r\n    },\r\n    modelValue: {\r\n        type: String,\r\n        required: true,\r\n    },\r\n    placeholder: {\r\n        type: String,\r\n        required: false,\r\n    },\r\n    type: {\r\n        type: String,\r\n        default: 'text',\r\n    },\r\n    required: {\r\n        type: Boolean,\r\n        default: false,\r\n    },\r\n    error: {\r\n        type: String,\r\n        required: false,\r\n    },\r\n    min: {\r\n        type: String,\r\n        required: false,\r\n    },\r\n    max: {\r\n        type: String,\r\n        required: false,\r\n    },\r\n})\r\n\r\n// eslint-disable-next-line no-undef, no-unused-vars\r\nconst emit = defineEmits(['update:modelValue'])\r\n\r\n</script>\r\n\r\n<template>\r\n    <div class=\"item-form\">\r\n        <label v-if=\"label\" :for=\"id\">{{ label }}<span v-if=\"required\">*</span></label>\r\n        <div class=\"input-container\">\r\n            <div class=\"input-container-inner\">\r\n                <input :id=\"id\" :type=\"type\" :value=\"modelValue\"\r\n                    @input=\"$emit('update:modelValue', $event.target.value)\" :placeholder=\"placeholder\"\r\n                    :required=\"required\" autocomplete=\"off\" :min=\"type === 'date' ? minDate : null\"\r\n                    :max=\"type === 'date' ? maxDate : null\">\r\n            </div>\r\n            <div v-if=\"error\" class=\"error-message\">{{ error }}</div>\r\n        </div>\r\n\r\n\r\n    </div>\r\n</template>\r\n\r\n\r\n\r\n<style lang=\"scss\" scoped></style>","import script from \"./InputText.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./InputText.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","/* eslint-disable no-unused-vars */\r\nimport fetchAPI from \"./api\";\r\nconst baseURL =\r\n  process.env.VUE_APP_URL ||\r\n  \"https://heabys.github.io/prueba-tecnica-tk-front-static\";\r\n\r\nexport const reportService = {\r\n  async getReports() {\r\n    // return fetchAPI(\"/api/get-reports\");\r\n    return {\r\n      message: \"Lista de reportes obtenidas correctamente\",\r\n      data: [\r\n        {\r\n          id: 1,\r\n          title: \"Reporte de usuario 1\",\r\n          created_at: \"2022-01-01T00:00:00.000Z\",\r\n          report_link: `${baseURL}/reporte.xlsx`,\r\n        },\r\n        {\r\n          id: 2,\r\n          title: \"Reporte de usuario 2\",\r\n          created_at: \"2023-01-01T00:00:00.000Z\",\r\n          report_link: `${baseURL}/reporte.xlsx`,\r\n        },\r\n        {\r\n          id: 3,\r\n          title: \"Reporte de usuario 3\",\r\n          created_at: \"2024-01-01T00:00:00.000Z\",\r\n          report_link: `${baseURL}/reporte.xlsx`,\r\n        },\r\n      ],\r\n    };\r\n  },\r\n\r\n  async generateReport(reportData) {\r\n    // return fetchAPI(\"/api/generate-report\", {\r\n    //   method: \"POST\",\r\n    //   body: JSON.stringify(reportData),\r\n    // });\r\n    return {\r\n      message: \"El reporte se está generando\",\r\n    };\r\n  },\r\n\r\n  getReportById(id) {\r\n    // return fetchAPI(`/api/get-report/${id}`);\r\n    return {\r\n      message: \"Reporte obtenido correctamente\",\r\n      data: {\r\n        id: 1,\r\n        title: \"Reporte de usuario 1\",\r\n        created_at: \"2022-01-01T00:00:00.000Z\",\r\n        report_link: `${baseURL}/reporte.xlsx`,\r\n      },\r\n    };\r\n  },\r\n};\r\n","<template>\r\n    <div v-if=\"show\" class=\"modal-overlay\" @click.self=\"$emit('close')\">\r\n        <div class=\"modal-container\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                    <h2 class=\"modal-title\">Reporte por fecha de nacimiento</h2>\r\n                    <p class=\"modal-subtitle\">Ingresa los siguientes datos para generar tu reporte</p>\r\n                </div>\r\n\r\n\r\n                <form class=\"modal-form\" @submit.prevent=\"submitForm\">\r\n                    <div class=\"modal-form-inputs\">\r\n                        <InputText id=\"report-title\" label=\"Descripción del reporte\" v-model=\"form.title\"\r\n                            placeholder=\"Ingrese la descripción\" />\r\n\r\n                        <div class=\"modal-date-container\">\r\n                            <p class=\"modal-label\">Fecha de nacimiento</p>\r\n                            <div class=\"modal-input-container\">\r\n                                <InputText id=\"start-date\" label=\"Fecha inicio\" v-model=\"form.startDate\" type=\"date\" />\r\n                                <InputText id=\"end-date\" label=\"Fecha fin\" v-model=\"form.endDate\" type=\"date\" />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class=\"btn-container\">\r\n                        <button class=\"btn\" :disabled=\"!formIsValid\" type=\"submit\">\r\n                            <span>\r\n                                Generar Reporte\r\n                            </span>\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n/*eslint-disable */\r\nimport { ref, computed, defineEmits } from \"vue\";\r\nimport { reportService } from \"../services/report\";\r\nimport InputText from \"./inputs/InputText.vue\";\r\n\r\n\r\n\r\n// eslint-disable-next-line no-undef\r\ndefineProps({\r\n    show: Boolean,\r\n});\r\n\r\nconst emit = defineEmits([\"close\", \"submit\"]);\r\n\r\n\r\nconst form = ref({\r\n    title: \"\",\r\n    startDate: \"\",\r\n    endDate: \"\",\r\n});\r\n\r\nconst errors = ref({\r\n    title: \"\",\r\n    startDate: \"\",\r\n    endDate: \"\",\r\n});\r\n\r\n\r\n\r\nconst formIsValid = computed(() => {\r\n    errors.value = { title: \"\", startDate: \"\", endDate: \"\" };\r\n\r\n    if (!form.value.title) {\r\n        errors.value.title = \"La descripción es obligatoria.\";\r\n    }\r\n\r\n    if (!form.value.startDate) {\r\n        errors.value.startDate = \"La fecha de inicio es obligatoria.\";\r\n    }\r\n\r\n    if (!form.value.endDate) {\r\n        errors.value.endDate = \"La fecha de fin es obligatoria.\";\r\n    }\r\n\r\n    if (form.value.startDate && form.value.endDate && new Date(form.value.startDate) > new Date(form.value.endDate)) {\r\n        errors.value.startDate = \"La fecha de inicio no puede ser mayor que la fecha de fin.\";\r\n        errors.value.endDate = \"La fecha de fin debe ser mayor o igual a la de inicio.\";\r\n    }\r\n\r\n    return !errors.value.title && !errors.value.startDate && !errors.value.endDate;\r\n});\r\n\r\nconst submitForm = async () => {\r\n    if (!formIsValid.value) return;\r\n\r\n\r\n    try {\r\n        const response = await reportService.generateReport({\r\n            title: form.value.title,\r\n            start_date: form.value.startDate,\r\n            end_date: form.value.endDate,\r\n        });\r\n        if (response.message) {\r\n            emit(\"submit\", {\r\n                title: form.value.title,\r\n                start_date: form.value.startDate,\r\n                end_date: form.value.endDate,\r\n            }); emit(\"close\");\r\n            form.value.title = ''\r\n            form.value.startDate = ''\r\n            form.value.endDate = ''\r\n            alert('El reporte se ha generado correctamente')\r\n\r\n\r\n        }\r\n\r\n\r\n    } catch (error) {\r\n        console.error(\"Error al generar el reporte:\", error);\r\n    }\r\n};\r\n</script>\r\n","import script from \"./ReportFormModal.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./ReportFormModal.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div class=\"header-container\">\r\n        <img src=\"/prueba-tecnica-tk-front-static/logo.png\" alt=\"logo\">\r\n\r\n    </div>\r\n    <div class=\"report-container\">\r\n        <div class=\"table-header\">\r\n            <h1>Generador de reportes TK</h1>\r\n        </div>\r\n\r\n        <div class=\"table-container\">\r\n            <table class=\"report-table\">\r\n                <thead>\r\n                    <tr>\r\n                        <th class=\"text-left\">Título</th>\r\n                        <th class=\"text-center\">Fecha de Creación</th>\r\n                        <th class=\"text-right\">Acción</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    <tr v-for=\"report in reports\" :key=\"report.id\">\r\n                        <td class=\"text-left title\">{{ report.title }}</td>\r\n                        <td class=\"text-center date\">{{ formatDate(report.created_at) }}</td>\r\n                        <td class=\"text-right\" action>\r\n                            <button class=\"btn-download\" @click=\"downloadReport(report)\">\r\n                                <span>Descargar</span>\r\n                                <div class=\"download-icon\">\r\n                                    <img src=\"/prueba-tecnica-tk-front-static/download_vector.png\" alt=\"descargar\">\r\n                                </div>\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n\r\n\r\n        </div>\r\n        <div class=\"btn-container\">\r\n            <button class=\"btn\" @click=\"openModal\"><span>Crear Reporte</span></button>\r\n        </div>\r\n        <ReportFormModal :show=\"showModal\" @close=\"closeModal\" @submit=\"submitReport\" />\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\n\r\nimport { ref, onMounted } from 'vue'\r\nimport ReportFormModal from '../components/ReportFormModal.vue'\r\nimport { reportService } from '../services/report'\r\n\r\n\r\nconst showModal = ref(false)\r\nconst reports = ref([])\r\nconst isLoading = ref(true)\r\nconst error = ref(null)\r\n// eslint-disable-next-line no-unused-vars\r\nlet reportChannel = null;\r\n\r\nonMounted(async () => {\r\n    try {\r\n        const data = await reportService.getReports()\r\n        reports.value = data.data ?? [];\r\n    } catch (err) {\r\n        error.value = 'Error al cargar los reportes'\r\n        console.error('Error:', err)\r\n    } finally {\r\n        isLoading.value = false\r\n    }\r\n\r\n    // reportChannel = echo.channel('report')\r\n    // reportChannel.listen('.ReportCreated', (e) => {\r\n    //     if (!reports.value.some(report => report.id === e.data.report.id)) {\r\n    //         alert('Nuevo reporte creado')\r\n    //         reports.value.push(e.data.report)\r\n    //     }\r\n    // })\r\n\r\n\r\n})\r\n\r\n\r\n\r\n\r\nconst openModal = () => showModal.value = true\r\nconst closeModal = () => showModal.value = false\r\n\r\nconst formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleDateString()\r\n}\r\n\r\nconst downloadReport = (report) => {\r\n    const rawReport = { ...report }\r\n    const url = rawReport.report_link;\r\n    window.open(url, '_blank');\r\n}\r\n\r\nconst submitReport = async (report) => {\r\n    await new Promise(resolve => setTimeout(resolve, 5000))\r\n\r\n    reports.value.push({\r\n        id: reports.value.length + 1,\r\n        title: report.title,\r\n        created_at: new Date(),\r\n        report_link: reports.value[0].report_link,\r\n    })\r\n    alert('Nuevo reporte creado')\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/styles/pages/_report.scss\";\r\n@import \"@/styles/components/_modals.scss\";\r\n</style>","import script from \"./TableReport.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./TableReport.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./TableReport.vue?vue&type=style&index=0&id=0a67e1ee&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0a67e1ee\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","minDate","ref","maxDate","__exports__","baseURL","process","reportService","getReports","message","data","id","title","created_at","report_link","generateReport","reportData","getReportById","emit","__emit","form","startDate","endDate","errors","formIsValid","computed","value","Date","submitForm","async","response","start_date","end_date","alert","error","console","showModal","reports","isLoading","onMounted","err","openModal","closeModal","formatDate","dateString","toLocaleDateString","downloadReport","report","rawReport","url","window","open","submitReport","Promise","resolve","setTimeout","push","length"],"sourceRoot":""}