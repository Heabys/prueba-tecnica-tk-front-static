"use strict";(self["webpackChunkprueba_tecnica_front"]=self["webpackChunkprueba_tecnica_front"]||[]).push([[268],{1241:function(e,t){t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[r,l]of t)a[r]=l;return a}},5072:function(e,t,a){a.d(t,{A:function(){return k}});var r=a(6768),l=a(4232),n=a(144);const o={class:"item-form"},i=["for"],s={key:0},d={class:"input-container"},u={class:"input-container-inner"},c=["id","type","value","placeholder","required","min","max"],p={key:0,class:"error-message"};var v={__name:"InputText",props:{id:{type:String,required:!0},label:{type:String,required:!1},modelValue:{type:String,required:!0},placeholder:{type:String,required:!1},type:{type:String,default:"text"},required:{type:Boolean,default:!1},error:{type:String,required:!1},min:{type:String,required:!1},max:{type:String,required:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const a=(0,n.KR)("1980-01-01"),v=(0,n.KR)("2010-12-31");return(t,n)=>((0,r.uX)(),(0,r.CE)("div",o,[e.label?((0,r.uX)(),(0,r.CE)("label",{key:0,for:e.id},[(0,r.eW)((0,l.v_)(e.label),1),e.required?((0,r.uX)(),(0,r.CE)("span",s,"*")):(0,r.Q3)("",!0)],8,i)):(0,r.Q3)("",!0),(0,r.Lk)("div",d,[(0,r.Lk)("div",u,[(0,r.Lk)("input",{id:e.id,type:e.type,value:e.modelValue,onInput:n[0]||(n[0]=e=>t.$emit("update:modelValue",e.target.value)),placeholder:e.placeholder,required:e.required,autocomplete:"off",min:"date"===e.type?a.value:null,max:"date"===e.type?v.value:null},null,40,c)]),e.error?((0,r.uX)(),(0,r.CE)("div",p,(0,l.v_)(e.error),1)):(0,r.Q3)("",!0)])]))}};const m=v;var k=m},4268:function(e,t,a){a.r(t),a.d(t,{default:function(){return q}});a(4114);var r=a(6768),l=a(4232),n=a(144),o=a(5130);const i="http://127.0.0.1:8080",s={async getReports(){return{message:"Lista de reportes obtenidas correctamente",data:[{id:1,title:"Reporte de usuario 1",created_at:"2022-01-01T00:00:00.000Z",report_link:`${i}/reporte.xlsx`},{id:2,title:"Reporte de usuario 2",created_at:"2023-01-01T00:00:00.000Z",report_link:`${i}/reporte.xlsx`},{id:3,title:"Reporte de usuario 3",created_at:"2024-01-01T00:00:00.000Z",report_link:`${i}/reporte.xlsx`}]}},async generateReport(e){return{message:"El reporte se está generando"}},getReportById(e){return{message:"Reporte obtenido correctamente",data:{id:1,title:"Reporte de usuario 1",created_at:"2022-01-01T00:00:00.000Z",report_link:`${i}/reporte.xlsx`}}}};var d=a(5072);const u={class:"modal-container"},c={class:"modal-content"},p={class:"modal-form-inputs"},v={class:"modal-date-container"},m={class:"modal-input-container"},k={class:"btn-container"},b=["disabled"];var L={__name:"ReportFormModal",props:{show:Boolean},emits:["close","submit"],setup(e,{emit:t}){const a=t,l=(0,n.KR)({title:"",startDate:"",endDate:""}),i=(0,n.KR)({title:"",startDate:"",endDate:""}),L=(0,r.EW)((()=>(i.value={title:"",startDate:"",endDate:""},l.value.title||(i.value.title="La descripción es obligatoria."),l.value.startDate||(i.value.startDate="La fecha de inicio es obligatoria."),l.value.endDate||(i.value.endDate="La fecha de fin es obligatoria."),l.value.startDate&&l.value.endDate&&new Date(l.value.startDate)>new Date(l.value.endDate)&&(i.value.startDate="La fecha de inicio no puede ser mayor que la fecha de fin.",i.value.endDate="La fecha de fin debe ser mayor o igual a la de inicio."),!i.value.title&&!i.value.startDate&&!i.value.endDate))),g=async()=>{if(L.value)try{const e=await s.generateReport({title:l.value.title,start_date:l.value.startDate,end_date:l.value.endDate});e.message&&(a("submit",{title:l.value.title,start_date:l.value.startDate,end_date:l.value.endDate}),a("close"),l.value.title="",l.value.startDate="",l.value.endDate="",alert("El reporte se ha generado correctamente"))}catch(e){console.error("Error al generar el reporte:",e)}};return(t,a)=>e.show?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"modal-overlay",onClick:a[3]||(a[3]=(0,o.D$)((e=>t.$emit("close")),["self"]))},[(0,r.Lk)("div",u,[(0,r.Lk)("div",c,[a[6]||(a[6]=(0,r.Lk)("div",{class:"modal-header"},[(0,r.Lk)("h2",{class:"modal-title"},"Reporte por fecha de nacimiento"),(0,r.Lk)("p",{class:"modal-subtitle"},"Ingresa los siguientes datos para generar tu reporte")],-1)),(0,r.Lk)("form",{class:"modal-form",onSubmit:(0,o.D$)(g,["prevent"])},[(0,r.Lk)("div",p,[(0,r.bF)(d.A,{id:"report-title",label:"Descripción del reporte",modelValue:l.value.title,"onUpdate:modelValue":a[0]||(a[0]=e=>l.value.title=e),placeholder:"Ingrese la descripción"},null,8,["modelValue"]),(0,r.Lk)("div",v,[a[4]||(a[4]=(0,r.Lk)("p",{class:"modal-label"},"Fecha de nacimiento",-1)),(0,r.Lk)("div",m,[(0,r.bF)(d.A,{id:"start-date",label:"Fecha inicio",modelValue:l.value.startDate,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value.startDate=e),type:"date"},null,8,["modelValue"]),(0,r.bF)(d.A,{id:"end-date",label:"Fecha fin",modelValue:l.value.endDate,"onUpdate:modelValue":a[2]||(a[2]=e=>l.value.endDate=e),type:"date"},null,8,["modelValue"])])])]),(0,r.Lk)("div",k,[(0,r.Lk)("button",{class:"btn",disabled:!L.value,type:"submit"},a[5]||(a[5]=[(0,r.Lk)("span",null," Generar Reporte ",-1)]),8,b)])],32)])])])):(0,r.Q3)("",!0)}};const g=L;var f=g;const h={class:"report-container"},D={class:"table-container"},_={class:"report-table"},y={class:"text-left title"},R={class:"text-center date"},w={class:"text-right",action:""},x=["onClick"];var C={__name:"TableReport",setup(e){const t=(0,n.KR)(!1),a=(0,n.KR)([]),o=(0,n.KR)(!0),i=(0,n.KR)(null);(0,r.sV)((async()=>{try{const e=await s.getReports();a.value=e.data??[]}catch(e){i.value="Error al cargar los reportes",console.error("Error:",e)}finally{o.value=!1}}));const d=()=>t.value=!0,u=()=>t.value=!1,c=e=>new Date(e).toLocaleDateString(),p=e=>{const t={...e},a=t.report_link;window.open(a,"_blank")},v=async e=>{await new Promise((e=>setTimeout(e,5e3))),a.value.push({id:a.value.length+1,title:e.title,created_at:new Date,report_link:a.value[0].report_link}),alert("Nuevo reporte creado")};return(e,n)=>((0,r.uX)(),(0,r.CE)(r.FK,null,[n[4]||(n[4]=(0,r.Lk)("div",{class:"header-container"},[(0,r.Lk)("img",{src:"/prueba-tecnica-tk-front-static/logo.png",alt:"logo"})],-1)),(0,r.Lk)("div",h,[n[3]||(n[3]=(0,r.Lk)("div",{class:"table-header"},[(0,r.Lk)("h1",null,"Generador de reportes TK")],-1)),(0,r.Lk)("div",D,[(0,r.Lk)("table",_,[n[1]||(n[1]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",{class:"text-left"},"Título"),(0,r.Lk)("th",{class:"text-center"},"Fecha de Creación"),(0,r.Lk)("th",{class:"text-right"},"Acción")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.value,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",y,(0,l.v_)(e.title),1),(0,r.Lk)("td",R,(0,l.v_)(c(e.created_at)),1),(0,r.Lk)("td",w,[(0,r.Lk)("button",{class:"btn-download",onClick:t=>p(e)},n[0]||(n[0]=[(0,r.Lk)("span",null,"Descargar",-1),(0,r.Lk)("div",{class:"download-icon"},[(0,r.Lk)("img",{src:"/prueba-tecnica-tk-front-static/download_vector.png",alt:"descargar"})],-1)]),8,x)])])))),128))])])]),(0,r.Lk)("div",{class:"btn-container"},[(0,r.Lk)("button",{class:"btn",onClick:d},n[2]||(n[2]=[(0,r.Lk)("span",null,"Crear Reporte",-1)]))]),(0,r.bF)(f,{show:t.value,onClose:u,onSubmit:v},null,8,["show"])])],64))}},E=a(1241);const V=(0,E.A)(C,[["__scopeId","data-v-0a67e1ee"]]);var q=V}}]);
//# sourceMappingURL=268.cdce68b7.js.map